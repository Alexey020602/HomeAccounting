@using BlazorShared.Authorization.AuthenticationStateProvider
@inherits LayoutComponentBase
@layout BaseLayout

@inject  ILoginStateProvider LoginStateProvider
@* <MudThemeProvider /> *@
@* <MudPopoverProvider /> *@
@* <MudDialogProvider /> *@
@* <MudSnackbarProvider /> *@
@* *@
@* <HeadContent> *@
@*     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"> *@
@*     <link href="_content/MudBlazor/MudBlazor.min.css" rel="stylesheet" /> *@
@*     <link href="_content/BlazorShared/lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet"/> *@
@*     <link href="_content/BlazorShared/css/app.css" rel="stylesheet"/> *@
@*     <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" /> *@
@* </HeadContent> *@

@* <MudAppBar Elevation="3" Color="Color.Primary"> *@
@*     <MudIconButton Icon="@Icons.Material.Filled.Menu" *@
@*                    Color="Color.Inherit" *@
@*                    OnClick="ToggleSidebar" *@
@*                    Class="ml-2"/> *@
@*     <MudText Typo="Typo.h6" Class="ml-3 white--text">Домашняя бухгалтерия</MudText> *@
@* </MudAppBar> *@

<AppBar>
    <MudIconButton Icon="@Icons.Material.Filled.Menu"
                   Color="Color.Inherit"
                   OnClick="ToggleSidebar"
                   Class="ml-2"/>
</AppBar>

<MudDrawer @bind-Open="_isSidebarActive"
           Elevation="2"
           Color="Color.Default"
           Breakpoint="Breakpoint.Md"
           Variant="DrawerVariant.Responsive"
           ClipMode="DrawerClipMode.Always">
    <MudNavMenu>
        <MudNavLink Href="check" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Receipt">
            Добавление чека
        </MudNavLink>
        <MudNavLink Href="receipts" Icon="@Icons.Material.Filled.List">
            Чеки
        </MudNavLink>
        <MudNavLink Href="monthreport" Icon="@Icons.Material.Filled.Assessment">
            Отчет
        </MudNavLink>
        
        <MudButton  Color="Color.Error" OnClick="Logout" StartIcon="@Icons.Material.Filled.Logout" FullWidth="true">
            Выйти
        </MudButton>
    </MudNavMenu>
</MudDrawer>

<MudMainContent>
    <MudContainer MaxWidth="MaxWidth.ExtraExtraLarge" Class="justify-center">
        @Body
    </MudContainer>
</MudMainContent>

@code {
    private bool _isSidebarActive = true;

    private void ToggleSidebar()
    {
        _isSidebarActive = !_isSidebarActive;
    }

    private Task Logout() => LoginStateProvider.Logout();

    // protected override RenderFragment WrapContent(RenderFragment main)
    // {
    //     throw new NotImplementedException();
    // }

}